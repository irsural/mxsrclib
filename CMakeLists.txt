project(mxsrclib)
set(SOURCES
        correct_alg.cpp
        csvwork.cpp
        dbgprn.cpp
        hardflowg.cpp
        i2c.cpp
        imp_filt.cpp
        irs_chart_data.cpp
        irsadc.cpp
        irsalg.cpp
        irscalc.cpp
        irscpu.cpp
        irsdbgutil.cpp
        irsdcp.cpp
        irsdev.cpp
        irsdevices.cpp
        irsdsp.cpp
        irseeprom.cpp
        irserror.cpp
        irsexcept.cpp
        irsfilter.cpp
        irsfunnel.cpp
        irsgpio.cpp
        irshfftp.cpp
        irsinit.cpp
        irsint.cpp
        irskbd.cpp
        irslocale.cpp
        irslwip.cpp
        irsmath.cpp
        irsmatrix.cpp
        irsmbus.cpp
        irsmcutil.cpp
        irsmem.cpp
        irsmenu.cpp
        irsprop.cpp
        irsstd.cpp
        irsstring.cpp
        irsstrm.cpp
        irssysutils.cpp
        irstcpip.cpp
        irstime.cpp
        irsvariant.cpp
        measmul.cpp
        meassup.cpp
        mxdata.cpp
        mxextbase.cpp
        mxextchart.cpp
        mxifar.cpp
        mxnet.cpp
        mxnetc.cpp
        mxnetr.cpp
        niusbgpib.cpp
        niusbgpib_hardflow.cpp
        timer.cpp
        arch/qt/counter.cpp
        arch/qt/mxifa.cpp)

set(HEADERS
        correct_alg.h
        csvwork.h
        dbgprn.h
        hardflowg.h
        i2c.h
        imp_filt.h
        irs_chart_data.h
        irs_codecvt.h
        irsadc.h
        irsadcabs.h
        irsalg.h
        irscalc.h
        irschartwin.h
        irsconfig.h
        irsconsole.h
        irsconsolestd.h
        irscpp.h
        irscpu.h
        irsdacabs.h
        irsdbgutil.h
        irsdcp.h
        irsdefs.h
        irsdefsbase.h
        irsdev.h
        irsdevices.h
        irsdsp.h
        irseeprom.h
        irsencode.h
        irserror.h
        irsexcept.h
        irsfilter.h
        irsfinal.h
        irsfunnel.h
        irsgpio.h
        irshfftp.h
        irsinit.h
        irsint.h
        irskbd.h
        irslimits.h
        irslineinterp.h
        irslocale.h
        irslwip.h
        irslwipbuf.h
        irsmath.h
        irsmatrix.h
        irsmbus.h
        irsmcutil.h
        irsmem.h
        irsmenu.h
        irsnetdefs.h
        irsparamabs.h
        irspch.h
        irsprop.h
        irsrect.h
        irsspi.h
        irsstd.h
        irsstrconv.h
        irsstrconvbase.h
        irsstrdefs.h
        irsstring.h
        irsstrm.h
        irsstrmstd.h
        irssysutils.h
        irstable.h
        irstcpip.h
        irstest.h
        irstime.h
        irstree.h
        irsvariant.h
        lwipopts_conf.h
        measdef.h
        measmul.h
        meassup.h
        mxdata.h
        mxdatastd.h
        mxextbase.h
        mxextchart.h
        mxifa.h
        mxifar.h
        mxnet.h
        mxnetc.h
        mxnetd.h
        mxnetr.h
        niusbgpib.h
        niusbgpib_hardflow.h
        timer.h
        tstlan4abs.h

        # todo
        arch/qt/irsdefsarch.h
        arch/qt/counter.h
)
add_library(mxsrclib STATIC ${SOURCES} ${HEADERS})
set_target_properties(mxsrclib PROPERTIES OUTPUT_NAME libmxsrclib)
if (CMAKE_SYSTEM_NAME STREQUAL "CYGWIN" OR CMAKE_SYSTEM_NAME STREQUAL "Windows")
    target_link_libraries(mxsrclib -lpsapi -lws2_32 -static)
endif ()
target_compile_options(mxsrclib PUBLIC
        -finput-charset=CP1251
        -fPIC # Нужно для включения в dll
        -Wno-deprecated
        -Wextra
        -Woverloaded-virtual
        -Wno-unused-parameter
        -Wno-unused-local-typedefs
        -Wno-misleading-indentation
        -Wno-unused-variable)
target_include_directories(mxsrclib PUBLIC ${CMAKE_CURRENT_SOURCE_DIR} ${CMAKE_CURRENT_SOURCE_DIR}/arch/qt)
